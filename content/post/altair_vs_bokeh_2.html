---
title: "Altair vs. Bokeh (part 2)"
date: 2023-11-27T18:17:35-04:00
draft: false
summary: "In the first part of this series, I used a basic bar plot to illustrate the differences between Altair and Bokeh in terms of defaults, chart configuration, and syntactic style. In this post, I'll get into some of the more substantive differences, including more complicated chart types, combining plots, basic interactivity, and how to deploy the output online. Note that this is not intended to be a systematic comparison, but rather more of a preliminary exploration of the options."
tags: ['visualization', 'altair', 'bokeh']
---


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Simple Bar Chart</title>  
  <style>
    html, body {
      box-sizing: border-box;
      display: flow-root;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }

    .centered {
      justify-content:center;
    }

  </style>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.2.0.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.2.0.min.js"></script>
  <script type="text/javascript">
      Bokeh.set_log_level("info");
  </script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.8.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>

<p>In the <a href="https://dallascard.github.io/granular-material/post/altair_vs_bokeh_1/">first part</a> of this series, I used a basic bar plot to illustrate the differences between Altair and Bokeh in terms of defaults, chart configuration, and syntactic style. In this post, I'll get into some of the more substantive differences, including more complicated chart types, combining plots, basic interactivity, and how to deploy the output online. Note that this is not intended to be a systematic comparison, but rather more of a preliminary exploration of the options.</p>

<p>To illustrate these, I'll work here with histograms and density plots. These are ideal plots to play around with, as both are extremely common and useful (especially in exploratory data analysis, where they can be used to visualize the distribution of data), and yet both involve choices that go beyond basic aesthetics, like color, symbol, or plot area. In particular, it might matter a lot how we set parameters like the number of bins in a histogram or the bandwidth of the density estimator. Finally, both chart types can benefit from interactivity in important ways.</p>

<p>It doesn't really matter what data we use for this, so I'll use the <a target="_blanks" href="https://github.com/vega/vega-datasets/blob/main/data/movies.json">IMDB Rating data</a> provided by vega datasets, which has around 3000 rows. Note that we'll provide data to Altair as a URL, rather than a dataframe, to avoid embedding the full dataset in the javascript specification when we output it as HTML. (As an aside, there seems to be an <a target="_blank" href="https://github.com/vega/vega-lite/issues/9165">issue</a> such that the density transform we'll use below only works properly for data in json format, not csv.)</p>

<p>As we would expect from the previous post, creating a histogram is quite straightforward in Altair. As before, we will use <code>mark_bar()</code> as the mark type. However, there is one trick that is helpful here, which is that rather than giving altair a variable name for the y-encoding, we can give it the name of a special function, called <code>count()</code>, which will count the number of data elements which fall into each bin, as defined by whatever we put for the x-encoding (which in this case will be <code>IMDB_Rating</code>). Altair will also choose the number of bins semi-intelligently, with the option to set a maximum number.</p>

<p>In this case, since we are dealing with float valued ratings that go up to 10, we'll make things a bit more readable by setting the maximum number of bins to 10. (Note that this will actually end up giving us 9 bins, since the minimum rating in the data is greater than 1 and the maximum is less than 10). As a nice feature, Altair also makes it extremely easy to add tooltips, by just listing the variables to include in the tooltip, which we can use to display the exact count values for each bin. Also note that we are going to specify the data type for each variable (here, everything is Q for quantitative, as opposed to nominal or ordinal), as Altair may not be able to infer it. Here is the code snippet for our first figure:</p>

<pre class="s-code-block language-python">
<code>import altair as alt
from vega_datasets import data

alt.Chart(
    data.movies.url
).mark_bar(
    color='grey'
).encode(
    x=alt.X('IMDB_Rating:Q', bin=alt.Bin(maxbins=10)),
    y='count()',
    tooltip=['count()']
)
</code>
</pre> 
<p>And here is the resulting plot (with functional tooltips):</p>

<div id="altair-hist"></div>
<script>
(function(vegaEmbed) {
  var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "bar", "color": "grey"}, "encoding": {"tooltip": [{"aggregate": "count", "type": "quantitative"}], "x": {"bin": {"maxbins": 10}, "field": "IMDB_Rating", "type": "quantitative"}, "y": {"aggregate": "count", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json"};
  var embedOpt = {"mode": "vega-lite"};

  function showError(el, error){
      el.innerHTML = ('<div style="color:red;">'
                      + '<p>JavaScript Error: ' + error.message + '</p>'
                      + "<p>This usually means there's a typo in your chart specification. "
                      + "See the javascript console for the full traceback.</p>"
                      + '</div>');
      throw error;
  }
  const el = document.getElementById('altair-hist');
  vegaEmbed("#altair-hist", spec, embedOpt)
    .catch(error => showError(el, error));
})(vegaEmbed);

</script>

<p><br>If we want to show a density plot instead, things get a little bit more complicated, but Atlair has definitely planned for this particular use case. Here, we'll take advantage of one of the many transform functions provided by Altair, in this case <code>transform_density()</code>. This function will take the values in the dataframe, and compute density values using a kernel density estimator, effectively transforming one variable into another. Here, we'll ask it to produce the outputs in the form of counts (to better match the histogram), rather than as a normalized probability distribution. Having applied this transform, the output of it is then available to be given as the variable to be encoded on the y-channel, just like any other. To actually plot the data, we'll use a <code>mark_area()</code> to fill in the area below the line. Once again, we end up with very compact code (and output html), including tooltips.</p>


<pre class="s-code-block language-python">
<code>import altair as alt
from vega_datasets import data

alt.Chart(
    data.movies.url
).transform_density(
    'IMDB_Rating',
    as_=['IMDB_Rating', 'density'],
    counts=True,
).mark_area().encode(
    x="IMDB_Rating:Q",
    y='density:Q',
    tooltip=['IMDB_Rating:Q', 'density:Q']
)
</code>
</pre> 

<p>And here is the corresponding figure:</p>

<div id="altair-density"></div>
<script>
(function(vegaEmbed) {
  var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "area", "width": 2}, "encoding": {"tooltip": [{"field": "IMDB_Rating", "type": "quantitative"}, {"field": "density", "type": "quantitative"}], "x": {"field": "IMDB_Rating", "type": "quantitative"}, "y": {"field": "density", "type": "quantitative"}}, "transform": [{"density": "IMDB_Rating", "counts": true, "as": ["IMDB_Rating", "density"]}], "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json"};
  var embedOpt = {"mode": "vega-lite"};

  function showError(el, error){
      el.innerHTML = ('<div style="color:red;">'
                      + '<p>JavaScript Error: ' + error.message + '</p>'
                      + "<p>This usually means there's a typo in your chart specification. "
                      + "See the javascript console for the full traceback.</p>"
                      + '</div>');
      throw error;
  }
  const el = document.getElementById('altair-density');
  vegaEmbed("#altair-density", spec, embedOpt)
    .catch(error => showError(el, error));
})(vegaEmbed);

</script>

<p>As with the histogram, this looks quite good, out of the box. As noted, the <code>transform_density()</code> function is applying a kernel density estimator. If we wanted to, we could manually set the bandwidth for this. Since we haven't specified a value, Altair determines one automatically.</p>

<p>Comparing the two charts, it's obvious that both have their advantages. The histogram gives more precise information about the counts in each bin. However, a small change in the number of bins might give us quite a different figure, depending on exactly where the data lies. By contrast, the density plot will change more gradually as we change the bandwidth. On the other hand, with an inappropriate bandwidth, the density estimator will smooth over sharp changes in the density of the data.</p>

<p>One way we might think of combining these plots (to get the best of both) is to allow the user to view both at the same time. Putting them side by side in Altair is especially easy. All we need to do is to use the pipe symbol, i.e., <code>hist | density</code>.</p>

<div id="altair-both"></div>
<script>
(function(vegaEmbed) {
  var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "hconcat": [{"data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "bar", "color": "grey"}, "encoding": {"tooltip": [{"aggregate": "count", "type": "quantitative"}], "x": {"bin": {"maxbins": 10}, "field": "IMDB_Rating", "type": "quantitative"}, "y": {"aggregate": "count", "type": "quantitative"}}}, {"data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "area", "width": 2}, "encoding": {"tooltip": [{"field": "IMDB_Rating", "type": "quantitative"}, {"field": "density", "type": "quantitative"}], "x": {"field": "IMDB_Rating", "type": "quantitative"}, "y": {"field": "density", "type": "quantitative"}}, "transform": [{"density": "IMDB_Rating", "counts": true, "as": ["IMDB_Rating", "density"]}]}], "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json"};
  var embedOpt = {"mode": "vega-lite"};

  function showError(el, error){
      el.innerHTML = ('<div style="color:red;">'
                      + '<p>JavaScript Error: ' + error.message + '</p>'
                      + "<p>This usually means there's a typo in your chart specification. "
                      + "See the javascript console for the full traceback.</p>"
                      + '</div>');
      throw error;
  }
  const el = document.getElementById('altair-both');
  vegaEmbed("#altair-both", spec, embedOpt)
    .catch(error => showError(el, error));
})(vegaEmbed);

</script>

<p>However, for easier comparison, it would probably be better to overlay them on top of each other. To make this more interesting, let's add a slider to control the opacity of each element, to allow the user to transition smoothly from one to the other. To do so, we'll make use of Altair's interactive widgets, which allow for interactively controlling certain aspects of plots.</p>

<p>Like most things in Altair, this is quite straightforward, as long as we're working within the scope of things that have been planned for by Altair's creators. The first step is to create a slider. Referring to the docs, we find that we can do this using the <code>binding_range()</code> function, which takes min, max, and step values. Next, we need to bind this slider to a variable. To do this, we'll use a parameter (<code>param</code>), which basically maps the value of the slider to something that can be used in charts. Here are the two lines required to set this up:</p>

<pre class="s-code-block language-python">
<code>slider = alt.binding_range(min=0, max=1.0, step=0.01)
opacity_var = alt.param(name='Opacity', bind=slider, value=0.5)
</code>
</pre>

<p>Finally, we can set the <code>opacity</code> parameter of each plot. We'll set one of these directly to <code>opacity_var</code>, and the other to <code>1 - opacity_var</code>, such that they will trade off against each other. To make sure Altair recognizes this expression as something it can work with, we'll wrap it in <code>alt.value()</code>. Finally, we'll overlay the two plots on top of each other by using the <code>+</code> symbol, (rather than <code>|</code> symbol), and attach the parameter to the plot, using the <code>add_param()</code> function. We'll also turn off the background grid, drop the tooltips, and change the density plot from <code>mark_area()</code> to <code>mark_line()</code>, to make this a bit easier to read.</p>

<p>Here is the full code:</p>

<pre class="s-code-block language-python">
<code>import altair as alt
from vega_datasets import data

# create the slider and associated parameter
slider = alt.binding_range(min=0, max=1.0, step=0.01)
opacity_var = alt.param(name='Opacity', bind=slider, value=0.5)

# create the histogram
hist = alt.Chart(
    data.movies.url
).mark_bar(
    color='grey'
).encode(
    x=alt.X('IMDB_Rating:Q', bin=alt.Bin(maxbins=10)),
    y='count()',
    opacity=opacity_var,
)

# create the density plot
kde = alt.Chart(
    data.movies.url
).transform_density(
    'IMDB_Rating',
    counts=True,
    as_=['IMDB_Rating', 'density'],                        
).mark_line().encode(
    x="IMDB_Rating:Q",
    y='density:Q',
    opacity=alt.value(1-opacity_var),    
)

# overlay the two, and link it to the opacity parameter
(hist + kde).configure_axis(
    grid=False
).add_params(
    opacity_var
)
</code>
</pre>

<p>And here is the resulting interactive plot, which allows the user to easily slide back and forth between the histogram and the density plot:<p>

<div id="altair-combined"></div>
<script>
(function(vegaEmbed) {
  var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}, "axis": {"grid": false}}, "layer": [{"data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "line"}, "encoding": {"opacity": {"value": {"expr": "(1 - Opacity)"}}, "x": {"field": "IMDB_Rating", "type": "quantitative"}, "y": {"field": "density", "type": "quantitative"}}, "transform": [{"density": "IMDB_Rating", "counts": true, "as": ["IMDB_Rating", "density"]}]}, {"data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json"}, "mark": {"type": "bar", "color": "grey"}, "encoding": {"opacity": {"value": {"expr": "Opacity"}}, "x": {"bin": {"maxbins": 10}, "field": "IMDB_Rating", "type": "quantitative"}, "y": {"aggregate": "count", "type": "quantitative"}}}], "params": [{"name": "Opacity", "bind": {"input": "range", "max": 1.0, "min": 0, "step": 0.01}, "value": 0.5}], "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json"};
  var embedOpt = {"mode": "vega-lite"};

  function showError(el, error){
      el.innerHTML = ('<div style="color:red;">'
                      + '<p>JavaScript Error: ' + error.message + '</p>'
                      + "<p>This usually means there's a typo in your chart specification. "
                      + "See the javascript console for the full traceback.</p>"
                      + '</div>');
      throw error;
  }
  const el = document.getElementById('altair-combined');
  vegaEmbed("#altair-combined", spec, embedOpt)
    .catch(error => showError(el, error));
})(vegaEmbed);

</script>


<p><br>To make the same thing in Bokeh, we will take a somewhat different approach. First of all, there are the basic differences we looked at last time, like how we create the plot area and add elements using separate plotting commands (more like matplotlib). In this case, however, Bokeh doesn't have a dedicated plotting function for either histograms or density plots. Instead, we'll have to compute these ourselves, and then plot them using the basic plotting commands <code>quad</code> and <code>line</code>, respectively.</p>

<p>The fact that something like computing a density smoother is not built into Bokeh has both pros and cons. On the one hand, being forced to do it ourselves means we will likely be more intentional about what we are doing. On the other hand, if we just want a basic density plot for exploration, this may seem like extra work.</p>

<p>The other thing that is different is how Bokeh supports the interactivity. As in Altair, Bokeh provides a series of widgets for things like sliders, which can be linked to elements of plots. However, the way this is implemented is somewhat different, such that I couldn't find an easy way to directly support the kind of trading off of opacity between the histogram and density plot as I used above. Using the value of the slider directly is easy, but unfortunately Bokeh doesn't seem to accept expressions involving parameters, like one minus the value of the slider.</p>

<p>In order to get this to work, I used what is arguably the one killer feature of Bokeh, which I don't think Altair can match. Specifically, it is possible to write custom callbacks in Javascript, and link them to widgets. I'll dig into this a bit more below, but for the moment, we can just write a very simple callback to allow for the trading off of opacity. For the histogram, we'll use the <code>js_link()</code> function of the slider, which directly links the value of the slider to some glyph attribute (in this case the fill opacity, or alpha, value of the histogram). For the density plot, by contrast, we'll use <code>js_on_change()</code> to write a custom function which sets the value of the line opacity (alpha) to one minus the value of the slider.</p>

<p>Putting it all together, here is what I came up with. To compute the histogram, I manually set the number of bins, and used numpy's <code>histogram</code> function. To compute the density, I used <code>gaussian_kde()</code> in scipy. In both cases, I have been more explicit about the relevant parameters, compared to just using the defaults in Altair.</p>


<pre class="s-code-block language-python">
<code>from bokeh.plotting import figure, show
from bokeh.models import ColumnDataSource, CustomJS, Slider
from bokeh.layouts import column, row
from scipy import stats
import numpy as np

# load the data
source = data.movies()
temp = sorted(source['IMDB_Rating'].dropna().values)

# make the plot canvas
plot = figure(width=300, height=300, toolbar_location=None)

# compute the histogram
bins = np.arange(np.floor(min(temp)), np.ceil(max(temp))+1, 1)
hist, edges = np.histogram(temp, bins=bins)

# plot the histogram
quad = plot.quad(top=hist, bottom=0, left=edges[:-1], right=edges[1:],
         fill_color="grey", line_color="white", alpha=0.5)

# compute the density
kernel = stats.gaussian_kde(temp, bw_method='scott')
x = np.linspace(min(temp), max(temp), 100)
y = kernel(x) * len(temp)

# plot the density
col_source = ColumnDataSource(data=dict(x=x, y=y))
line = plot.line('x', 'y', source=col_source, alpha=0.5, width=2)

# make the interactive slider
sl = Slider(start=0.0, end=1.0, step=0.01, value=0.5, title='Opacity')

# link it to the histogram
sl.js_link('value', quad.glyph, 'fill_alpha')

# link it to the density line
sl.js_on_change('value',
    CustomJS(args=dict(other=line),
             code="other.glyph.line_alpha = 1 - this.value"
    )
)

# combine everything together
layout = column(plot, sl)
show(layout)
</code>
</pre>

<p>Overall it produces a very similar result, although note that the bandwidth parameter seems somewhat different between Altair and scipy, so the results are not necessarily identical for the same value of the bandwidth parameters.</p>

<div id="fd8c226c-8430-43d1-b53c-c80a2866d2ae" data-root-id="c5f1565a-c555-40a5-a441-503c3352dc02" style="display: contents;"></div>

<script type="application/json" id="9a00f822-c67b-4ea8-b8fe-7702ef3a6505">
  {"3b282ea0-30a0-476f-9461-caeff8b2df0a":{"version":"3.2.0","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"c5f1565a-c555-40a5-a441-503c3352dc02","attributes":{"children":[{"type":"object","name":"Figure","id":"54337b45-0245-46e6-bd07-64af39c1dd4e","attributes":{"width":300,"height":300,"x_range":{"type":"object","name":"DataRange1d","id":"605cad95-48d9-4b76-82e2-aed806ce10c1"},"y_range":{"type":"object","name":"DataRange1d","id":"f1c04897-0653-4787-b92b-46c78b81460b"},"x_scale":{"type":"object","name":"LinearScale","id":"90f73c7c-9444-4530-8513-d0ef91d4adc1"},"y_scale":{"type":"object","name":"LinearScale","id":"99d04d91-d7e8-469b-b3a6-390ae50f9ea4"},"title":{"type":"object","name":"Title","id":"9ceef423-2241-43e6-a6c5-e86cede77470"},"renderers":[{"type":"object","name":"GlyphRenderer","id":"d6cc8d0e-e6f5-4718-878c-821b56a6f870","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"c22f40e3-f9c8-47a3-8660-48357176ef51","attributes":{"selected":{"type":"object","name":"Selection","id":"383c32eb-442b-43e1-a23c-75a783cff9dd","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"e6281dcf-d60f-4474-b748-065d7fcbb628"},"data":{"type":"map","entries":[["top",{"type":"ndarray","array":{"type":"bytes","data":"BQAAACsAAABkAAAAEQEAAHkCAADZAwAA5QIAAMwAAAAEAAAA"},"shape":[9],"dtype":"int32","order":"little"}],["left",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAA8D8AAAAAAAAAQAAAAAAAAAhAAAAAAAAAEEAAAAAAAAAUQAAAAAAAABhAAAAAAAAAHEAAAAAAAAAgQAAAAAAAACJA"},"shape":[9],"dtype":"float64","order":"little"}],["right",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAAEAAAAAAAAAIQAAAAAAAABBAAAAAAAAAFEAAAAAAAAAYQAAAAAAAABxAAAAAAAAAIEAAAAAAAAAiQAAAAAAAACRA"},"shape":[9],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"7d410d05-ec40-4e40-9d00-79245bfdfc23","attributes":{"filter":{"type":"object","name":"AllIndices","id":"cc9b7afe-35c3-4a4c-9c59-8834d479a77c"}}},"glyph":{"type":"object","name":"Quad","id":"41b74608-098d-4d62-8d90-d799bb5c3382","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"value","value":0},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.5},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.5},"hatch_alpha":{"type":"value","value":0.5}}},"nonselection_glyph":{"type":"object","name":"Quad","id":"0fa30659-56d6-414b-bcba-3fa1cc6a95de","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"value","value":0},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Quad","id":"f7755d2d-82cf-4de3-92b0-49fd9e5868f4","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"value","value":0},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"018426ec-d64b-449b-99d4-b564c51815e7","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"1a38209e-be95-4bc2-9206-deaedb20dd28","attributes":{"selected":{"type":"object","name":"Selection","id":"c66567a9-ce83-459c-984e-b1a1f6e11d8a","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"f137f2bc-c131-4bf3-a8b9-67b54ae9e5d8"},"data":{"type":"map","entries":[["x",{"type":"ndarray","array":{"type":"bytes","data":"ZmZmZmZm9j+p15F6Han3P+tIvY7U6/g/Lrrooosu+j9xKxS3QnH7P7ScP8v5s/w/9g1r37D2/T85f5bzZzn/Pz744IMPPgBA37D2DWvfAECAaQyYxoABQCIiIiIiIgJAw9o3rH3DAkBkk0022WQDQAZMY8A0BgRApwR5SpCnBEBIvY7U60gFQOp1pF5H6gVAiy666KKLBkAs589y/iwHQM6f5fxZzgdAb1j7hrVvCEAQEREREREJQLLJJptssglAU4I8JchTCkD0OlKvI/UKQJbzZzl/lgtAN6x9w9o3DEDZZJNNNtkMQHodqdeReg1AG9a+Ye0bDkC9jtTrSL0OQF5H6nWkXg9A////////D0BQ3ArFrVAQQKG4FYpboRBA8pQgTwnyEEBCcSsUt0IRQJNNNtlkkxFA5ClBnhLkEUA0BkxjwDQSQIXiVihuhRJA1r5h7RvWEkAmm2yyySYTQHd3d3d3dxNAyFOCPCXIE0AYMI0B0xgUQGkMmMaAaRRAuuiiiy66FEAKxa1Q3AoVQFuhuBWKWxVArH3D2jesFUD8Wc6f5fwVQE422WSTTRZAnhLkKUGeFkDu7u7u7u4WQEDL+bOcPxdAkKcEeUqQF0Dggw8++OAXQDJgGgOmMRhAgjwlyFOCGEDSGDCNAdMYQCT1OlKvIxlAdNFFF110GUDErVDcCsUZQBaKW6G4FRpAZmZmZmZmGkC2QnErFLcaQAgffPDBBxtAWPuGtW9YG0Co15F6HakbQPqznD/L+RtASpCnBHlKHECabLLJJpscQOxIvY7U6xxAPCXIU4I8HUCMAdMYMI0dQN7d3d3d3R1ALrrooosuHkB+lvNnOX8eQNBy/iznzx5AIE8J8pQgH0BwKxS3QnEfQMIHH3zwwR9ACfKUIE8JIEAxYBoDpjEgQFrOn+X8WSBAgjwlyFOCIECqqqqqqqogQNMYMI0B0yBA+4a1b1j7IEAj9TpSryMhQExjwDQGTCFAdNFFF110IUCcP8v5s5whQMWtUNwKxSFA7RvWvmHtIUAViluhuBUiQD744IMPPiJAZmZmZmZmIkA="},"shape":[100],"dtype":"float64","order":"little"}],["y",{"type":"ndarray","array":{"type":"bytes","data":"7b87V6dOGECt18oKoWAdQChnMWNOCCFARboNHORVI0CCmYuGSwAmQBiqYTiKlSlAAO5mDkiXLkC7BvPRwKEyQCSnvBvauTZAGVB2C0hRO0DkInc61gRAQDJx8+5PQUJAg/IkOgM3RECWvN2FXs1FQH4pP1mv/EZAOpog7a/QR0AyIKomPmxIQMJ3413YC0lAF8q7lEICSkBZrCvR0KpLQMRgeSjcT05AwPnK7jIFUUCYIsxPHlRTQHMq6Zoe1VVAwZv9jbgyWECbX9mfuB9aQN+nAfCfdVtADOzKnoxDXEAo0kut98VcQImWB8kqTV1AR5+jC6shXkDaIkSYxXRfQKoOAeTosGBAKTZD8RP9YUCA94jTeqhjQMSAcME9v2VAuV+WPElMaEDRUTQNJFJrQCvpuQDHw25AUBf0zJ1AcUBXOil+dS1zQOQf3YA8DnVAbWOTj1vOdkA/0qUGaWZ4QDqdAxTQ33lA1TkrL0JSe0CxiBF8edt8QIc4EruklH5AoRDn6ABFgEBnB3cz/VuBQHbdonkhh4JAIcG+lmC7g0C3iSp/au6EQEdaeGccGYZAxZOVcRA4h0C78CEcWUqIQAaQ50wdT4lARVruYGJDikD9Ot3GfCGLQNH3U03i4otAYJzAjJaDjEBrmMdEGgWNQORl8cG4bo1AtUAfUXPKjUCWliulyx+OQFcHn4wUb45ALoBZuuavjkCj00Qay9OOQFAwjw3gy45ApYz9lomOjkCUjrbgRhqOQMF3eA2edI1AN/YrRmumjEBOq4GYG7iLQGijBJrJr4pA070dWIuRiUB0ag4t2mCIQBPKmfmhIYdA4vFKHR3YhUDPTYj0nIeEQBYq2k4vMYNAkGvwpE7TgUDJQcVIPGuAQICi0g4H731AgxE3n270ekCoBnxkGPN3QND0FgQO/XRA0UbmD2klckAw2TSmAfluQJHQaQlnHGpA0JQLhIfDZUB/QXSuEvRhQBHX05PgVV1APh4850e6V0D+u9OluvVSQCVGNBiM0E1APiAiPOLyRkDl53lslDRBQGrNTvC3BjlASDYVKzKaMUA="},"shape":[100],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"adac9709-d10b-4b1e-908f-b3d76563e75f","attributes":{"filter":{"type":"object","name":"AllIndices","id":"cf9e9078-9b8e-44bb-8925-a34862efc494"}}},"glyph":{"type":"object","name":"Line","id":"fb88e99a-d60a-4c43-853c-33fb35f036f2","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","line_alpha":0.5,"line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"6c73b995-6895-4b5c-8a0d-ba4cf95bb75c","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"0f12e8af-a0bf-463b-915c-c154027d08a0","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"#1f77b4","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"ceb6a81e-9c3f-49b2-af38-3f08856e0a45","attributes":{"tools":[{"type":"object","name":"PanTool","id":"d9bba51a-26a1-415a-814c-64e4d65b952c"},{"type":"object","name":"WheelZoomTool","id":"baa9de7e-ff54-4f4b-b560-42a419c4cfbe"},{"type":"object","name":"BoxZoomTool","id":"3f1bec8e-439f-4724-a5a1-295a99e738c8","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"701ca580-8a75-4e7b-9298-8b668ad97292","attributes":{"syncable":false,"level":"overlay","visible":false,"left_units":"canvas","right_units":"canvas","bottom_units":"canvas","top_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"336fde15-520c-47bc-9ea8-005fddaacd1f"},{"type":"object","name":"ResetTool","id":"7fe26670-264d-4f7c-8dee-2714d854d08e"},{"type":"object","name":"HelpTool","id":"0834df56-a287-4639-b0b8-d2dd989e0366"}]}},"toolbar_location":null,"left":[{"type":"object","name":"LinearAxis","id":"b240b8c6-8616-48ca-ab3a-0a22318504f8","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"c0d1c049-ef9f-4c96-b568-b49261f07db6","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"da12bd0b-0935-4015-887e-859c8dd66944"},"major_label_policy":{"type":"object","name":"AllLabels","id":"bc85fa00-f058-4606-8236-65fbd3d39556"}}}],"below":[{"type":"object","name":"LinearAxis","id":"8bfbffab-e562-4bf1-9878-e40aba46a313","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"9eb6461d-a64a-4982-84f8-9dba19b6b815","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"3c6095b2-9e9e-40eb-9c06-56360074a78f"},"major_label_policy":{"type":"object","name":"AllLabels","id":"f42e4cae-c572-4f0d-8f07-bd96113708b9"}}}],"center":[{"type":"object","name":"Grid","id":"9729a669-bde8-4023-af84-309fbc7f929d","attributes":{"axis":{"id":"8bfbffab-e562-4bf1-9878-e40aba46a313"}}},{"type":"object","name":"Grid","id":"90565b37-f969-4f8f-b677-964eb10611b0","attributes":{"dimension":1,"axis":{"id":"b240b8c6-8616-48ca-ab3a-0a22318504f8"}}}]}},{"type":"object","name":"Slider","id":"172bcf2b-87bd-44b5-aa7b-0264a6c806a7","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"cd258e73-7295-4b53-ae4f-b571a8d87006","attributes":{"args":{"type":"map","entries":[["other",{"id":"41b74608-098d-4d62-8d90-d799bb5c3382"}]]},"code":"other.fill_alpha = this.value"}},{"type":"object","name":"CustomJS","id":"f6d5a0e8-449f-46ce-acf1-7f48585f0ed3","attributes":{"args":{"type":"map","entries":[["other",{"id":"018426ec-d64b-449b-99d4-b564c51815e7"}]]},"code":"other.glyph.line_alpha = 1 - this.value"}}]]]},"title":"Opacity","start":0.0,"end":1.0,"value":0.5,"step":0.01}}]}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"mode","kind":"Any","default":"warn"},{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationAreaBase1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]}]}}
</script>
<script type="text/javascript">
  (function() {
    const fn = function() {
      Bokeh.safely(function() {
        (function(root) {
          function embed_document(root) {
          const docs_json = document.getElementById('9a00f822-c67b-4ea8-b8fe-7702ef3a6505').textContent;
          const render_items = [{"docid":"3b282ea0-30a0-476f-9461-caeff8b2df0a","roots":{"c5f1565a-c555-40a5-a441-503c3352dc02":"fd8c226c-8430-43d1-b53c-c80a2866d2ae"},"root_ids":["c5f1565a-c555-40a5-a441-503c3352dc02"]}];
          root.Bokeh.embed.embed_items(docs_json, render_items);
          }
          if (root.Bokeh !== undefined) {
            embed_document(root);
          } else {
            let attempts = 0;
            const timer = setInterval(function(root) {
              if (root.Bokeh !== undefined) {
                clearInterval(timer);
                embed_document(root);
              } else {
                attempts++;
                if (attempts > 100) {
                  clearInterval(timer);
                  console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                }
              }
            }, 10, root)
          }
        })(window);
      });
    };
    if (document.readyState != "loading") fn();
    else document.addEventListener("DOMContentLoaded", fn);
  })();
</script>

<p><br>As before, the HTML output from Bokeh is quite a bit longer (which you can see if you check the HTML source for this page), but that's not necessarily a big deal.</p>

<p>The fact that both Altair and Bokeh support this kind of interactivity, without requiring a server connection, is one of the main reasons to use them over a static plotting library like matplotlib. One could easily produce a static plot using other options, but the ability to create a simple interactive chart that can be trivially embedded in a static webpage, is huge!</p>

<p>Unfortunately, this basic interactivity only extends so far. In particular, we've seen how we can link a slider to opacity. There is similarly support for things like choosing which variable to display on which axis (using a drop-down menu), or other aspects of the plot where hooks have been explicitly provided. It does not, however, extend to all aspects of the plot.</p>

<p>For example, it would be extremely convenient if we could allow the user to interactively set the bandwidth of the kernel density estimator, or control the number of bins in the histogram. Both of these would be helpful, because histograms and density plots can look dramatically different depending on how they are configured. Allowing the user to scrub across a range of values allows them to get a better sense of what the data really looks like.</p>

<p>Unfortunately, if we try to link the value of the slider to the bandwidth (either in Altair, or using <code>js_link()</code> in Bokeh), it will not work. This makes sense, because in both cases, these involve computations that are currently being run when we execute these python scripts, not things being computed by javascript in the browser.</p>

<p>However, as you might have guessed, with Bokeh we can make use of the same trick as above. As mentioned, Bokeh supports custom Javascript callbacks. This means that, if we are willing to do it, we can create custom scripts that CAN be executed directly in the browser. This is a huge advantage of Bokeh, and theoretically allows for much more complex interactivity options on static sites than can be made with Altair. On the other hand, doing so requires coding a javascript script in the middle of a python script, which is not exactly convenient or easy to debug. Moreover, if we're already writing our own javascript, at some point it makes more sense to just switch to something like D3, which can be written fully in javascript and incorporates much better support for a variety of features.</p>

<p>Nevertheless, as a proof of concept, here is a simple Bokeh script that includes a custom javascript callback that allows the user to interactively set the number of bins in a histogram. (I'll leave it to someone else to write the javascript for computing the KDE!). This is basically the same approach as above, but with many more lines of javascript code embedded within the python script.</p>

<pre class="s-code-block language-python">
<code>from bokeh.plotting import figure, show
from bokeh.models import ColumnDataSource, CustomJS, Slider, Range1d
from bokeh.models import ColumnDataSource, Grid, LinearAxis, Plot, Quad
from bokeh.layouts import column, row

source = data.movies()
temp = sorted(source['IMDB_Rating'].dropna().values)
temp_cs = ColumnDataSource(data=dict(temp=temp))

plot = figure(width=300, height=300, toolbar_location=None)

# compute the basic histogram
bins = np.arange(np.floor(min(temp)), np.ceil(max(temp))+1, 1)
hist, edges = np.histogram(temp, bins=bins)

# put the relevant parameters into a column data source
col_source = ColumnDataSource(data=dict(top=hist, bottom=[0]*len(hist), left=edges[:-1], right=edges[1:]))

# plot the initial data
plot.quad(top='top', bottom='bottom', left='left', right='right', source=col_source,
         fill_color="grey", line_color="white", alpha=0.5)

# recompute the histogram paramters as the slider changes
callback = CustomJS(args=dict(source=col_source, temp_cs=temp_cs), code="""
    const n_bins = cb_obj.value    
    const vals =  temp_cs.data.temp
    const vals_min = Math.floor(Math.min(...vals));
    const vals_max = Math.ceil(Math.max(...vals));    
    const bin_width = (vals_max - vals_min) / n_bins;
    var left = Array(n_bins);
    for (var i = 0; i < left.length; i += 1) {
        left[i] = i * bin_width + vals_min;
    }    
    const right = left.map(n => n + bin_width);
    const bottom = Array(left.length).fill(0);
    var top = Array(left.length).fill(0);
    for (var i = 0; i < vals.length; i += 1) {
        var bin_num = Math.floor((vals[i] - vals_min) / bin_width);
        top[bin_num] += 1;
    }
    source.data = {top, bottom, left, right}
    """
    )

# combine everything together
slider = Slider(start=1, end=50, value=np.ceil(max(temp))-np.floor(min(temp))+1, step=1, title="Number of bins")
slider.js_on_change('value', callback)

# maintain the same x-range regardless
plot.x_range = Range1d(min(temp), max(temp)+1)

layout = column(plot, slider)
show(layout)
</code>
</pre>

<p>And the result works more or less as expected:</p>

    <div id="aae0d266-3383-4724-a642-f452aae6a204" data-root-id="bf3b0eda-67c7-4e8a-85cc-e474a9ff7c8f" style="display: contents;"></div>
  
    <script type="application/json" id="a08a4c90-c1f6-4fef-83cc-b4a80df64e7a">
      {"4eba3f33-94ed-4520-9a82-ac5412c77458":{"version":"3.2.0","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"bf3b0eda-67c7-4e8a-85cc-e474a9ff7c8f","attributes":{"children":[{"type":"object","name":"Figure","id":"7b68e8ba-2693-4ce3-bfca-511b5156ded5","attributes":{"width":300,"height":300,"x_range":{"type":"object","name":"Range1d","id":"a96f6dff-52e0-42e4-8572-44998edbccfb","attributes":{"start":1.4,"end":10.2}},"y_range":{"type":"object","name":"DataRange1d","id":"1726ef98-b081-46b1-812b-9d5e5bd2f1e3"},"x_scale":{"type":"object","name":"LinearScale","id":"7d71a7c0-9adf-4792-a619-5a58ebbde7f4"},"y_scale":{"type":"object","name":"LinearScale","id":"a7a76d00-5948-454e-bfa9-db40cb429fdf"},"title":{"type":"object","name":"Title","id":"580e46a7-c3ca-4e46-b218-61ecb0e61426"},"renderers":[{"type":"object","name":"GlyphRenderer","id":"26df8d51-94d7-4c24-aa43-cd24e2b9c1a5","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"0f3c7692-f840-4de4-90ef-7a37518c549f","attributes":{"selected":{"type":"object","name":"Selection","id":"90df0198-ad14-45e6-b418-927957d9c74d","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"faedd231-a919-4ebc-995a-dfe7688d738a"},"data":{"type":"map","entries":[["top",{"type":"ndarray","array":{"type":"bytes","data":"BQAAACsAAABkAAAAEQEAAHkCAADZAwAA5QIAAMwAAAAEAAAA"},"shape":[9],"dtype":"int32","order":"little"}],["bottom",[0,0,0,0,0,0,0,0,0]],["left",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAA8D8AAAAAAAAAQAAAAAAAAAhAAAAAAAAAEEAAAAAAAAAUQAAAAAAAABhAAAAAAAAAHEAAAAAAAAAgQAAAAAAAACJA"},"shape":[9],"dtype":"float64","order":"little"}],["right",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAAEAAAAAAAAAIQAAAAAAAABBAAAAAAAAAFEAAAAAAAAAYQAAAAAAAABxAAAAAAAAAIEAAAAAAAAAiQAAAAAAAACRA"},"shape":[9],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"8f0f3a89-94c6-4a09-b04e-c9c2d544f8f9","attributes":{"filter":{"type":"object","name":"AllIndices","id":"b4a94493-21fa-45f3-b637-a65e557e4bb2"}}},"glyph":{"type":"object","name":"Quad","id":"479c77f9-2350-40e8-8cc3-77f6c0280d9a","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"field","field":"bottom"},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.5},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.5},"hatch_alpha":{"type":"value","value":0.5}}},"nonselection_glyph":{"type":"object","name":"Quad","id":"cf7cbda9-9c0f-4378-afac-d22777fa1d87","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"field","field":"bottom"},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Quad","id":"3a519274-65ce-4e63-8271-a151f7915f1f","attributes":{"left":{"type":"field","field":"left"},"right":{"type":"field","field":"right"},"bottom":{"type":"field","field":"bottom"},"top":{"type":"field","field":"top"},"line_color":{"type":"value","value":"white"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"grey"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"bf34a36f-5f64-46f4-aec8-413d581ce1a0","attributes":{"tools":[{"type":"object","name":"PanTool","id":"5d2c0f88-3a20-4b2e-a51d-b718577fdb53"},{"type":"object","name":"WheelZoomTool","id":"9c84ba43-c1f8-4c53-9d12-7d22c80d500e"},{"type":"object","name":"BoxZoomTool","id":"3af512a4-c85f-4540-b6d9-c8e964c9dc35","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"2c317765-cae9-4d98-b69e-74d4ddae83cb","attributes":{"syncable":false,"level":"overlay","visible":false,"left_units":"canvas","right_units":"canvas","bottom_units":"canvas","top_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"1fcfdfc2-59c0-4435-ad28-414fb716e7ee"},{"type":"object","name":"ResetTool","id":"9144c095-b012-4a32-a9c0-2b58419353c2"},{"type":"object","name":"HelpTool","id":"32733b61-df3e-452a-9138-84aeaf70898f"}]}},"toolbar_location":null,"left":[{"type":"object","name":"LinearAxis","id":"1a9e344f-538c-4d72-883d-fd944223ef62","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"35ccf639-4b43-42f7-9ae2-cb835907d00e","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"2287740a-5744-4d95-a2ad-1dabc33b4967"},"major_label_policy":{"type":"object","name":"AllLabels","id":"85e1584b-3849-4638-b85d-07d48c0fe4bb"}}}],"below":[{"type":"object","name":"LinearAxis","id":"4271c7b1-a552-41d3-b517-8c4b4c81b4d4","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"526e6ddc-4d39-45fd-8d69-b1acde08e670","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"3cabdd12-f842-49af-b60d-58d8aa9f01b8"},"major_label_policy":{"type":"object","name":"AllLabels","id":"b8a8773c-25fe-435f-942a-a1a18108c456"}}}],"center":[{"type":"object","name":"Grid","id":"7646180d-8eeb-4599-b90b-1c0fb5a36279","attributes":{"axis":{"id":"4271c7b1-a552-41d3-b517-8c4b4c81b4d4"}}},{"type":"object","name":"Grid","id":"449c9ba3-1acc-4d59-adcc-b782a7d17f62","attributes":{"dimension":1,"axis":{"id":"1a9e344f-538c-4d72-883d-fd944223ef62"}}}]}},{"type":"object","name":"Slider","id":"8857fa40-d6f4-431f-8329-a4a9b629a4e3","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"41a6c98b-0228-41fc-9cad-a1efb336b801","attributes":{"args":{"type":"map","entries":[["source",{"id":"0f3c7692-f840-4de4-90ef-7a37518c549f"}],["temp_cs",{"type":"object","name":"ColumnDataSource","id":"198593fe-a9f1-42f0-8b8f-28235467cc55","attributes":{"selected":{"type":"object","name":"Selection","id":"bf758101-a4e7-4404-89ae-8cc9c6f97190","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"8d132480-f02a-4a47-bacc-9f39b3cc233c"},"data":{"type":"map","entries":[["temp",[1.4,1.5,1.6,1.7000000000000002,1.7000000000000002,2.0,2.0,2.1,2.1,2.2,2.2,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,3.9,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.1,4.2,4.2,4.2,4.2,4.2,4.2,4.2,4.2,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.3,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.4,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.6,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.7,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.8,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,4.9,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.1,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.2,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.3,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.4,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.5,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.7,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.8,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,5.9,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.1,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.2,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.3,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.4,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.5,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.6,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.7,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.8,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,6.9,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.1,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.2,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.3,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.6,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.7,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.8,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,7.9,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.1,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.2,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.3,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.4,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.6,8.6,8.6,8.6,8.6,8.6,8.6,8.6,8.7,8.7,8.7,8.7,8.7,8.7,8.7,8.7,8.7,8.8,8.8,8.8,8.8,8.8,8.8,8.8,8.8,8.9,8.9,8.9,8.9,8.9,8.9,9.0,9.1,9.2,9.2]]]}}}]]},"code":"\n    const n_bins = cb_obj.value    \n    const vals =  temp_cs.data.temp\n    const vals_min = Math.floor(Math.min(...vals));\n    const vals_max = Math.ceil(Math.max(...vals));    \n    const bin_width = (vals_max - vals_min) / n_bins;\n    var left = Array(n_bins);\n    for (var i = 0; i &lt; left.length; i += 1) {\n        left[i] = i * bin_width + vals_min;\n    }    \n    const right = left.map(n =&gt; n + bin_width);\n    const bottom = Array(left.length).fill(0);\n    var top = Array(left.length).fill(0);\n    for (var i = 0; i &lt; vals.length; i += 1) {\n        var bin_num = Math.floor((vals[i] - vals_min) / bin_width);\n        top[bin_num] += 1;\n    }\n    source.data = {top, bottom, left, right}    \n\n"}}]]]},"title":"Number of bins","start":1,"end":50,"value":10.0}}]}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"mode","kind":"Any","default":"warn"},{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationAreaBase1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('a08a4c90-c1f6-4fef-83cc-b4a80df64e7a').textContent;
              const render_items = [{"docid":"4eba3f33-94ed-4520-9a82-ac5412c77458","roots":{"bf3b0eda-67c7-4e8a-85cc-e474a9ff7c8f":"aae0d266-3383-4724-a642-f452aae6a204"},"root_ids":["bf3b0eda-67c7-4e8a-85cc-e474a9ff7c8f"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>

<p><br>If we do want to more easily incorporate custom interactions into either Altair or Bokeh, without writing any javascript, there is one final option. In fact, it is quite easy to do so, as long as the plots are being run by the corresponding Altair or Bokeh server. This means that we can easily run them locally (e.g., for exploratory data analyses), but unfortunately we can't simply insert them into static web pages.<p>

<p>To deploy such interactive visualizations online, (assuming you're not running your own server), your best bet is to use a package like <a target="_blank" href="https://github.com/streamlit/streamlit">Streamlit</a> or <a target="_blank" href="https://github.com/holoviz/panel">Panel</a>, and host the visualization someplace like Streamlit Cloud or HuggingFace. For example, <a target="_blank" href="https://huggingface.co/spaces/dcard/panel-bokeh-test">here</a> is a plot I made using Bokeh and Panel that I have uploaded to HuggingFace. It may take a minute to load up (click Restart this Space, if necessary), but it does work quite seamlessly, and allows the user to separately control both the kernel density estimator bandwidth and the number of bins in the histogram. (If you click on Files, you can see the script used to produce this in <code>app.py</code>, and you will see that it is quite a simple and straightforward python script, where we wrap the plot generation in a function, and then link that to sliders using Panel.)</p>

<p>Wrapping up, both Altair and Bokeh give us extensive options for both interactivity. If we're only using these locally, or we don't care where they are hosted online, then we can easily code up a wide range of interactive plots by combining either Altair or Bokeh with a package like Panel. For deployment on static web pages, however, we'll either need to limit ourselves to the forms of interactivity that are explicitly supported, or we can use Bokeh and write custom javascript callbacks. Overall Bokeh seems to require more external libraries to create some basic chart types (which has both advantages and disadvantages), and may not be as intuitive or compact as Altair, but this ability to support custom callbacks is ultimately a big advantage for deploying interactive visualizations on static pages.</p>


